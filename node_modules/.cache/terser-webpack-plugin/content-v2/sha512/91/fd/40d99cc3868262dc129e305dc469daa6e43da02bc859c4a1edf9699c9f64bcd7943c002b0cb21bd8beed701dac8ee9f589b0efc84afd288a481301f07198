{"map":"{\"version\":3,\"sources\":[\"bundle.js\"],\"names\":[\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"__webpack_exports__\",\"sumArr\",\"arr\",\"sum\",\"length\",\"getMapPixel\",\"ctx\",\"x\",\"y\",\"pixel\",\"getImageData\",\"data\",\"scanMapTile\",\"random\",\"min\",\"max\",\"Math\",\"ceil\",\"floor\",\"checkCollision\",\"hitbox1\",\"hitbox2\",\"width\",\"height\",\"removeElement\",\"el\",\"idx\",\"indexOf\",\"splice\",\"splitNum\",\"num\",\"str\",\"toString\",\"push\",\"parseInt\",\"input\",\"[object Object]\",\"this\",\"movement\",\"attack\",\"document\",\"addEventListener\",\"e\",\"onKeyUp\",\"onKeyDown\",\"event\",\"keyCode\",\"preventDefault\",\"includes\",\"unshift\",\"fired\",\"hud\",\"pos\",\"image\",\"Image\",\"src\",\"heartSprite\",\"numbers\",\"primaryitems\",\"startPage\",\"deathPage\",\"marryPage\",\"winPage\",\"maxHearts\",\"slotA\",\"slotB\",\"death\",\"drawImage\",\"console\",\"log\",\"clearRect\",\"render\",\"updateHearts\",\"updateMiniMap\",\"updateMoney\",\"updateKeys\",\"updateBombCount\",\"updateSlotA\",\"updateSlotB\",\"hp\",\"fillStyle\",\"fillRect\",\"gridPos\",\"money\",\"forEach\",\"digit\",\"keys\",\"bombs\",\"itemCode\",\"item\",\"sword\",\"sprite\",\"swordSfx\",\"Audio\",\"play\",\"direction\",\"hitBox\",\"player\",\"spriteCtx\",\"ouch\",\"hitbox\",\"tracebox\",\"topLeft\",\"topRight\",\"bottomLeft\",\"bottomRight\",\"frames\",\"run\",\"cooldown\",\"invincibility\",\"knockback\",\"attacks\",\"sourceX\",\"sourceY\",\"setDirection\",\"damage\",\"assign\",\"pop\",\"spawn\",\"pixelPos\",\"runCycle\",\"frameData\",\"spark\",\"units_unit\",\"grid\",\"startFrame\",\"row\",\"col\",\"action\",\"frame\",\"updateAction\",\"speed\",\"currentFrame\",\"neighbors\",\"possibleActions\",\"checkAvailableActions\",\"octorok\",\"type\",\"super\",\"board\",\"worldCtx\",\"collisionCtx\",\"overworld\",\"collisionMap\",\"playerPos\",\"worldPos\",\"map\",\"drawWorld\",\"drawCollisionMap\",\"game\",\"hudCtx\",\"boardCtx\",\"startmusic\",\"volume\",\"music\",\"lovemusic\",\"unitDeath\",\"scrolling\",\"scrollQueue\",\"units\",\"openSpaces\",\"enemyCount\",\"muted\",\"live\",\"finalstage\",\"marryme\",\"clearStartPage\",\"setTimeout\",\"loop\",\"destroyUnits\",\"reset\",\"renderWinPage\",\"renderStartPage\",\"requestAnimationFrame\",\"gameLoop\",\"clear\",\"step\",\"draw\",\"clearUnits\",\"clearAttacks\",\"checkBorder\",\"scroll\",\"processInput\",\"stepUnits\",\"renderDeathPage\",\"pause\",\"currentTime\",\"drawUnits\",\"drawAttacks\",\"unit\",\"knockBackPlayer\",\"checkCollisionsAgainstPlayer\",\"damageUnit\",\"damagePlayer\",\"takeDamage\",\"killPlayer\",\"killUnit\",\"faceDirection\",\"impassableTerrain\",\"move\",\"newGrid\",\"getMapPos\",\"scanGrid\",\"setSpawns\",\"$this\",\"playerDirection\",\"renderMarryPage\",\"pixel1\",\"pixel2\",\"pixel1value\",\"pixel2value\",\"topPixel\",\"bottomPixel\",\"checkIfBarrier\",\"getInput\",\"menuCanvas\",\"getElementById\",\"zelda_hudCtx\",\"getContext\",\"spriteCanvas\",\"zelda_spriteCtx\",\"mapCanvas\",\"zelda_boardCtx\",\"collisionCanvas\",\"zelda_collisionCtx\",\"zelda_game\",\"window\",\"init\"],\"mappings\":\"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\"}","code":"!function(t){var s={};function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&\"object\"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:t}),2&s&&\"string\"!=typeof t)for(var a in t)i.d(e,a,function(s){return t[s]}.bind(null,a));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,\"a\",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p=\"/dist/\",i(i.s=0)}([function(t,s,i){\"use strict\";function e(t){let s=0;for(let i=0;i<t.length;i++)s+=t[i];return s}function a(t,s,i){const e=t.getImageData(s,i,1,1);return[e.data[0],e.data[1],e.data[2]]}function h(t,s,i){return e(t.getImageData(s+23,i+23,2,2).data)}function r(t,s){return t=Math.ceil(t),s=Math.floor(s),Math.floor(Math.random()*(s-t))+t}function o(t,s){return t.x<s.x+s.width&&t.x+t.width>s.x&&t.y<s.y+s.height&&t.y+t.height>s.y}function n(t,s){let i=t.indexOf(s);i>-1&&t.splice(i,1)}function c(t){let s=t.toString(),i=[];for(let t=0;t<s.length;t++)i.push(parseInt(s[t]));return i}i.r(s);var l=class{constructor(){this.movement=[],this.attack=document.addEventListener(\"keyup\",t=>this.onKeyUp(t)),document.addEventListener(\"keydown\",t=>this.onKeyDown(t))}getInput(){return this.attack?(this.attack=!1,\"attack\"):this.movement[0]}onKeyDown(t){switch(t.keyCode){case 38:case 87:t.preventDefault(),this.movement.includes(\"up\")||this.movement.unshift(\"up\");break;case 39:case 68:t.preventDefault(),this.movement.includes(\"right\")||this.movement.unshift(\"right\");break;case 40:case 83:t.preventDefault(),this.movement.includes(\"down\")||this.movement.unshift(\"down\");break;case 37:case 65:t.preventDefault(),this.movement.includes(\"left\")||this.movement.unshift(\"left\");break;case 32:t.preventDefault(),this.fired||(this.attack=!0,this.fired=!0)}}onKeyUp(){switch(event.keyCode){case 38:case 87:n(this.movement,\"up\");break;case 39:case 68:n(this.movement,\"right\");break;case 40:case 83:n(this.movement,\"down\");break;case 37:case 65:n(this.movement,\"left\");break;case 32:this.fired=!1}}};var p=class{constructor(t){this.ctx=t,this.pos={x:0,y:0},this.image=new Image,this.image.src=\"./assets/images/ui/menu.png\",this.heartSprite=new Image,this.heartSprite.src=\"./assets/images/items/hearts.png\",this.numbers=new Image,this.numbers.src=\"./assets/images/ui/numbers.png\",this.primaryitems=new Image,this.primaryitems.src=\"./assets/images/items/primaryItems.png\",this.startPage=new Image,this.startPage.src=\"./assets/images/ui/start.png\",this.deathPage=new Image,this.deathPage.src=\"./assets/images/ui/deathpage.png\",this.marryPage=new Image,this.marryPage.src=\"./assets/images/ui/marry-2.png\",this.winPage=new Image,this.winPage.src=\"./assets/images/ui/win.png\",this.maxHearts=6,this.slotA=null,this.slotB=null,this.death=!1}renderMarryPage(){this.ctx.drawImage(this.marryPage,0,0)}renderWinPage(){console.log(\"ftw\"),this.ctx.drawImage(this.winPage,0,0)}renderStartPage(){this.ctx.drawImage(this.startPage,0,0)}renderDeathPage(){!1===this.death&&(this.ctx.drawImage(this.deathPage,0,0),this.death=!0)}clearStartPage(){this.ctx.clearRect(0,0,768,696),this.render()}render(){this.ctx.drawImage(this.image,0,528,768,696,this.pos.x,this.pos.y,768,696),this.updateHearts(6),this.updateMiniMap({x:7,y:7}),this.updateMoney(0),this.updateKeys(0),this.updateBombCount(0),this.updateSlotA(0),this.updateSlotB()}updateHearts(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(528,96,192,48);for(let s=0;s<this.maxHearts;s++)this.ctx.drawImage(this.heartSprite,s<t?24:72,0,24,24,528+24*s,96,24,24)}updateMiniMap(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(48,24,192,48),this.ctx.fillStyle=\"grey\",this.ctx.fillRect(48,48,192,96),this.ctx.fillStyle=\"#80D010\",this.ctx.fillRect(51+12*t.x,48+12*t.y,9,9)}updateMoney(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(312,48,48,24),c(t).forEach((t,s)=>{this.ctx.drawImage(this.numbers,0+24*t,0,24,24,312+24*s,48,24,24)})}updateKeys(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(312,96,48,24),c(t).forEach((t,s)=>{this.ctx.drawImage(this.numbers,0+24*t,0,24,24,312+24*s,96,24,24)})}updateBombCount(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(312,120,48,24),c(t).forEach((t,s)=>{this.ctx.drawImage(this.numbers,0+24*t,0,24,24,312+24*s,120,24,24)})}updateSlotA(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(456,72,24,48),this.ctx.drawImage(this.primaryitems,0+24*t,0,24,48,456,72,24,48)}updateSlotB(t){this.ctx.fillStyle=\"black\",this.ctx.fillRect(384,72,24,48)}};var m=class{constructor(t,s){this.ctx=s,this.sprite=new Image,this.sprite.src=\"./assets/images/player/attacks.png\",this.swordSfx=new Audio(\"./assets/sfx/sword.wav\"),this.swordSfx.play(),this.direction=t.direction,96===this.direction?(this.pos={x:t.x,y:t.y-36},this.hitBox={x:t.x+18,y:t.y-36,width:9,height:48}):144===this.direction?(this.pos={x:t.x+36,y:t.y},this.hitBox={x:t.x+36,y:t.y+24,width:48,height:9}):0===this.direction?(this.pos={x:t.x,y:t.y+36},this.hitBox={x:t.x+21,y:t.y+36,width:9,height:48}):48===this.direction&&(this.pos={x:t.x-36,y:t.y},this.hitBox={x:t.x-36,y:t.y+24,width:48,height:9})}clear(){this.ctx.clearRect(this.pos.x,this.pos.y,48,48)}step(){}draw(){this.ctx.drawImage(this.sprite,this.direction,0,48,48,this.pos.x,this.pos.y,48,48)}};var d=class{constructor(t){this.ctx=t,this.sprite=new Image,this.sprite.src=\"./assets/images/player/link.png\",this.ouch=new Audio(\"./assets/sfx/link-hurt.wav\"),this.pos={x:336,y:432,width:48,height:48,direction:0},this.hitbox={x:this.pos.x+12,y:this.pos.y+12,width:24,height:24},this.tracebox={topLeft:[this.pos.x+9,this.pos.y+24],topRight:[this.pos.x+39,this.pos.y+24],bottomLeft:[this.pos.x+9,this.pos.y+45],bottomRight:[this.pos.x+39,this.pos.y+45]},this.frames={run:0,attack:0,cooldown:0,invincibility:0,knockback:0},this.hp=6,this.attacks=[]}reset(){this.hp=6,this.attacks=[],this.pos={x:336,y:432,width:48,height:48,direction:0},this.hitbox={x:this.pos.x+12,y:this.pos.y+12,width:24,height:24},this.tracebox={topLeft:[this.pos.x+9,this.pos.y+24],topRight:[this.pos.x+39,this.pos.y+24],bottomLeft:[this.pos.x+9,this.pos.y+45],bottomRight:[this.pos.x+39,this.pos.y+45]},this.frames={run:0,attack:0,cooldown:0,invincibility:0,knockback:0}}clear(){this.ctx.clearRect(this.pos.x,this.pos.y,48,48)}step(){this.frames.run<=0&&(this.frames.run=16),this.frames.cooldown&&this.frames.cooldown--,this.frames.knockback&&this.frames.knockback--,this.frames.invincibility&&this.frames.invincibility--,this.frames.attack?this.frames.attack--:this.attacks.splice(0,1)}render(){this.hp<=0||(this.frames.attack&&this.frames.invincibility?this.drawImage(this.pos.direction+240,288+this.frames.invincibility%3*48):this.frames.attack&&!this.frames.invincibility?this.drawImage(this.pos.direction,96):!this.frames.attack&&this.frames.invincibility&&this.frames.run<9?this.drawImage(this.pos.direction+240,0+this.frames.invincibility%3*48):!this.frames.attack&&this.frames.invincibility&&this.frames.run>=9?this.drawImage(this.pos.direction+240,144):!this.frames.attack&&!this.frames.invincibility&&this.frames.run<9?this.drawImage(this.pos.direction,0):!this.frames.attack&&!this.frames.invincibility&&this.frames.run>=9&&this.drawImage(this.pos.direction,48))}drawImage(t,s){this.ctx.drawImage(this.sprite,t,s,48,48,this.pos.x,this.pos.y,48,48)}setDirection(t){switch(t){case\"up\":this.pos.direction=96;break;case\"right\":this.pos.direction=144;break;case\"down\":this.pos.direction=0;break;case\"left\":this.pos.direction=48}}move(t,s,i){this.hp<=0||this.frames.cooldown||(this.frames.run--,this.setDirection(i),this.pos.x+=t,this.pos.y+=s,this.hitbox.x+=t,this.hitbox.y+=s,this.tracebox.topLeft[0]+=t,this.tracebox.topLeft[1]+=s,this.tracebox.topRight[0]+=t,this.tracebox.topRight[1]+=s,this.tracebox.bottomLeft[0]+=t,this.tracebox.bottomLeft[1]+=s,this.tracebox.bottomRight[0]+=t,this.tracebox.bottomRight[1]+=s)}takeDamage(t=1){this.hp<=0||this.frames.invincibility||(Object.assign(this.frames,{invincibility:45,knockback:8}),this.ouch.play(),this.hp-=t,this.attacks.pop())}attack(){this.hp<=0||this.frames.cooldown||this.frames.knockback||(this.frames.cooldown=18,this.frames.attack=15,this.attacks.push(new m(this.pos,this.ctx)))}};var u=class{constructor(t,s){this.ctx=s,this.sprite=new Image,this.sprite.src=\"./assets/images/effects.png\",this.pos={x:t[0],y:t[1],width:48,height:48},this.pixelPos=t,this.runCycle=r(20,150),this.frameData={invincibility:100}}takeDamage(){}clear(){this.ctx.clearRect(this.pos.x,this.pos.y,48,48)}step(){this.runCycle--}draw(){this.ctx.drawImage(this.sprite,this.runCycle>=8?0:48,0,48,48,this.pos.x,this.pos.y,48,48)}};var y=class{constructor(t,s){this.ctx=s,this.sprite=new Image,this.sprite.src=\"./assets/images/effects.png\",this.pos={x:t.x,y:t.y,width:48,height:48},this.frameData={run:0,invincibility:100}}takeDamage(){}clear(){this.ctx.clearRect(this.pos.x,this.pos.y,48,48)}step(){this.frameData.run++}draw(){this.ctx.drawImage(this.sprite,96+48*Math.floor(this.frameData.run/2),0,48,48,this.pos.x,this.pos.y,48,48)}};var f=class{constructor(t,s,i,e){this.ctx=e,this.sprite=new Image,this.sprite.src=\"./assets/images/units/overworld-enemies.png\",this.ouch=new Audio(\"./assets/sfx/hit-enemy.wav\"),this.grid=s,this.pos={x:t[0],y:t[1],row:(t[1]-168)/48,col:t[0]/48,width:48,height:48},this.frameData={run:0,action:48,direction:0,frame:i,invincibility:0}}takeDamage(t=1){this.frameData.invincibility||(this.hp-=t,this.frameData.invincibility=20,this.ouch.play())}clear(){this.ctx.clearRect(this.pos.x,this.pos.y,48,48)}step(){this.frameData.invincibility&&this.frameData.invincibility--,this.frameData.action<=0&&this.updateAction(),96===this.frameData.direction?this.pos.y-=1*this.speed:144===this.frameData.direction?this.pos.x+=1*this.speed:0===this.frameData.direction?this.pos.y+=1*this.speed:48===this.frameData.direction&&(this.pos.x-=1*this.speed),this.frameData.run+=1*this.speed,this.frameData.action-=1*this.speed}draw(){let t=this.frameData.run<14?this.frameData.frame:this.frameData.frame+48;this.frameData.run>25&&(this.frameData.run=0),this.ctx.drawImage(this.sprite,this.frameData.direction,t,48,48,this.pos.x,this.pos.y,48,48)}checkAvailableActions(){let t=[];return this.pos.row>0&&1020===this.grid[this.pos.row-1][this.pos.col]&&t.push([96,0,-1]),1020===this.grid[this.pos.row][this.pos.col+1]&&t.push([144,1,0]),this.pos.row<10&&1020===this.grid[this.pos.row+1][this.pos.col]&&t.push([0,0,1]),1020===this.grid[this.pos.row][this.pos.col-1]&&t.push([48,-1,0]),t}updateAction(){let t=this.checkAvailableActions();this.frameData.action=48;let s=(i=t)[Math.floor(Math.random()*i.length)];var i;this.frameData.direction=s[0],this.pos.col+=s[1],this.pos.row+=s[2]}};var g=class extends f{constructor(t,s,i){let e=r(0,4);super(t,s,96*e,i),this.hp=0===e||2===e?1:2,this.speed=r(1,3),this.updateAction()}};var x=class{constructor(t,s){this.worldCtx=t,this.collisionCtx=s,this.overworld=new Image,this.overworld.src=\"./assets/images/maps/overworld.png\",this.collisionMap=new Image,this.collisionMap.src=\"./assets/images/maps/overworld-collision.png\",this.pos={x:5376,y:3528}}setLocation(t,s,i,e){}scroll(t){}getMapPos(){return{x:this.pos.x/768,y:(this.pos.y+168)/528}}render(){this.drawWorld(),this.drawCollisionMap()}drawWorld(){this.worldCtx.drawImage(this.overworld,this.pos.x,this.pos.y,768,696,0,0,768,696)}drawCollisionMap(){this.collisionCtx.drawImage(this.collisionMap,this.pos.x,this.pos.y,768,696,0,0,768,696)}};var w=class{constructor(t,s,i,e){this.hud=new p(t),this.player=new d(s),this.board=new x(i,e),this.spriteCtx=s,this.collisionCtx=e,this.startmusic=new Audio(\"./assets/sfx/overworldstart.ogg\"),this.startmusic.volume=.2,this.music=new Audio(\"./assets/sfx/overworld.ogg\"),this.music.volume=.2,this.lovemusic=new Audio(\"./assets/sfx/love.ogg\"),this.lovemusic.volume=.2,this.unitDeath=new Audio(\"./assets/sfx/destroy-enemy.wav\"),this.scrolling=!1,this.scrollQueue=0,this.units=[],this.grid=null,this.openSpaces=null,this.enemyCount=0,this.input=new l,this.muted=!1,this.live=!1,this.finalstage=!1,this.marryme=!1,document.addEventListener(\"keydown\",t=>{13!==t.keyCode||this.live||(this.live=!0,this.hud.clearStartPage(),this.startmusic.play(),setTimeout(()=>{this.music.play(),this.music.loop=!0},6410)),this.player.hp<=0&&13===t.keyCode&&(this.destroyUnits(),this.player.reset(),this.board.pos={x:5376,y:3528},this.board.render(),this.hud.render(),this.player.render(),this.hud.clearStartPage(),this.hud.death=!1,this.startmusic.play(),setTimeout(()=>{this.music.play(),this.music.loop=!0},6410)),this.marryme&&13===t.keyCode&&this.hud.renderWinPage(),77===t.keyCode&&(this.muted?(this.startmusic.volume=.2,this.music.volume=.2,this.muted=!1):(this.startmusic.volume=0,this.music.volume=0,this.muted=!0))})}init(){this.board.render(),this.hud.render(),this.player.render(),this.hud.renderStartPage(),requestAnimationFrame(()=>this.gameLoop())}gameLoop(){this.clear(),this.step(this.collisionCtx),this.draw(),requestAnimationFrame(()=>this.gameLoop())}clear(){this.clearUnits(),this.clearAttacks(),this.player.clear()}step(t){this.checkBorder(),this.scroll(t),this.processInput(t),this.stepUnits(t),this.player.step()}draw(){this.player.hp<=0&&(this.hud.renderDeathPage(),this.music.pause(),this.music.currentTime=0),this.drawUnits(),this.drawAttacks(),this.player.render()}clearUnits(){this.units.forEach(t=>t.clear())}clearAttacks(){this.player.attacks.forEach(t=>t.clear())}stepUnits(t){this.player.frames.knockback&&this.knockBackPlayer(t),this.units.forEach((t,s)=>{t instanceof u&&t.runCycle<=0&&(this.units[s]=new g(t.pixelPos,this.grid,this.spriteCtx)),t.step(),this.checkCollisionsAgainstPlayer(t),this.player.attacks.forEach(s=>{o(s.hitBox,t.pos)&&this.damageUnit(t)})})}checkCollisionsAgainstPlayer(t){t instanceof u||t instanceof y||o(this.player.hitbox,t.pos)&&this.damagePlayer()}damagePlayer(t){this.player.hp<=0||(this.player.takeDamage(),this.hud.updateHearts(this.player.hp),this.player.hp<=0&&this.killPlayer())}killPlayer(){this.unitDeath.play(),this.units.push(new y(this.player.pos,this.spriteCtx))}damageUnit(t,s){t.takeDamage(s),t.hp<=0&&this.killUnit(t)}killUnit(t){this.unitDeath.play(),this.units.splice(this.units.indexOf(t),1),this.units.push(new y(t.pos,this.spriteCtx))}knockBackPlayer(t){let s=this.player.pos.direction,i=this.player.pos.x,e=this.player.pos.y;96===s&&e<634&&!this.impassableTerrain(\"down\",t)?this.player.move(0,12):144===s&&i>14&&!this.impassableTerrain(\"left\",t)?this.player.move(-12,0):0===s&&e>188&&!this.impassableTerrain(\"up\",t)?this.player.move(0,-12):48===s&&i<706&&!this.impassableTerrain(\"right\",t)&&this.player.move(12,0)}drawUnits(){this.units.forEach(t=>t.draw())}drawAttacks(){this.player.attacks.forEach(t=>t.draw())}scanGrid(t){let s=[],i=[];for(let e=168;e<696;e+=48){let a=[];for(let s=0;s<768;s+=48){let r=h(t,s,e);a.push(r),1020===r&&i.push([s,e])}s.push(a)}this.openSpaces=i,this.grid=s}setSpawns(){for(let t=0;t<this.enemyCount;t++){let t=this.openSpaces[Math.floor(Math.random()*this.openSpaces.length)];this.units.push(new u(t,this.spriteCtx))}}scroll(t){if(this.scrolling)if(this.scrollQueue<=0)this.hud.updateMiniMap(this.board.getMapPos()),this.scrolling=!1,this.board.drawCollisionMap(t),this.scanGrid(t),this.setSpawns();else{if(1952===this.board.pos.y&&2304===this.board.pos.x){this.finalstage=!0,this.lovemusic.play(),this.destroyUnits();var s=this;setTimeout((function(){s.destroyUnits()}),1e3),this.music.pause()}let t=this.player.pos.direction;96===t&&(this.board.pos.y-=8,this.scrollQueue>48&&this.player.move(0,8)),144===t&&(this.board.pos.x+=8,this.scrollQueue>48&&this.player.move(-8,0)),0===t&&(this.board.pos.y+=8,this.scrollQueue>48&&this.player.move(0,-8)),48===t&&(this.board.pos.x-=8,this.scrollQueue>48&&this.player.move(8,0)),this.scrollQueue-=8,this.board.drawWorld()}}checkBorder(){(this.player.pos.y<172||this.player.pos.y>648)&&(this.scrolling=!0,this.destroyUnits(),this.scrollQueue=528),(this.player.pos.x>720||this.player.pos.x<0)&&(this.scrolling=!0,this.destroyUnits(),this.scrollQueue=768),this.player.pos.x>=340&&this.player.pos.x<=400&&this.player.pos.y<490&&this.finalstage&&(this.marryme||(this.marryme=!0,this.hud.renderMarryPage()))}destroyUnits(){this.clearUnits(),this.units=[],this.enemyCount=r(1,6)}checkIfBarrier(t,s){let i=e(t),a=e(s);return 765===i||503===i||(765===a||503===a)}impassableTerrain(t,s){if(\"up\"===t){const t=a(s,this.player.tracebox.topLeft[0],this.player.tracebox.topLeft[1]-3),i=a(s,this.player.tracebox.topRight[0],this.player.tracebox.topRight[1]-3);return this.checkIfBarrier(t,i)}if(\"right\"===t){const t=a(s,this.player.tracebox.topRight[0]+3,this.player.tracebox.topRight[1]),i=a(s,this.player.tracebox.bottomRight[0]+3,this.player.tracebox.bottomRight[1]);return this.checkIfBarrier(t,i)}if(\"down\"===t){const t=a(s,this.player.tracebox.bottomLeft[0],this.player.tracebox.bottomLeft[1]+3),i=a(s,this.player.tracebox.bottomRight[0],this.player.tracebox.bottomRight[1]+3);return this.checkIfBarrier(t,i)}if(\"left\"===t){const t=a(s,this.player.tracebox.topLeft[0]-3,this.player.tracebox.topRight[1]),i=a(s,this.player.tracebox.bottomLeft[0]-3,this.player.tracebox.bottomLeft[1]);return this.checkIfBarrier(t,i)}}processInput(t){if(this.scrolling)return;if(!this.live)return;let s=this.input.getInput(),i=null;switch(s){case\"attack\":return void this.player.attack();case\"up\":i=this.impassableTerrain(s,t)?0:-4,this.player.move(0,i,s);break;case\"right\":i=this.impassableTerrain(s,t)?0:4,this.player.move(i,0,s);break;case\"down\":i=this.impassableTerrain(s,t)?0:4,this.player.move(0,i,s);break;case\"left\":i=this.impassableTerrain(s,t)?0:-4,this.player.move(i,0,s)}}};const b=document.getElementById(\"menu-canvas\"),k=b.getContext(\"2d\");b.width=768,b.height=696;const v=document.getElementById(\"sprite-canvas\"),I=v.getContext(\"2d\");v.width=768,v.height=696;const D=document.getElementById(\"map-canvas\"),P=D.getContext(\"2d\");D.width=768,D.height=696;const C=document.getElementById(\"collision-canvas\"),S=C.getContext(\"2d\");C.width=768,C.height=696;const R=new w(k,I,P,S);window.addEventListener(\"load\",()=>{R.init()},!1)}]);","extractedComments":[]}