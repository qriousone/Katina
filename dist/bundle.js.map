{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util/util.js","webpack:///./src/util/input.js","webpack:///./src/hud/hud.js","webpack:///./src/player/sword.js","webpack:///./src/player/player.js","webpack:///./src/units/spawn.js","webpack:///./src/units/spark.js","webpack:///./src/units/unit.js","webpack:///./src/units/octorok.js","webpack:///./src/board.js","webpack:///./src/game.js","webpack:///./src/util/constants.js","webpack:///./zelda.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","sumArr","arr","sum","length","getMapPixel","ctx","x","y","pixel","getImageData","data","scanMapTile","random","min","max","Math","ceil","floor","checkCollision","hitbox1","hitbox2","width","height","removeElement","el","idx","indexOf","splice","splitNum","num","str","toString","push","parseInt","this","movement","attack","document","addEventListener","e","onKeyUp","onKeyDown","event","keyCode","preventDefault","includes","unshift","fired","pos","image","Image","src","heartSprite","numbers","primaryitems","startPage","deathPage","marryPage","maxHearts","slotA","slotB","death","drawImage","clearRect","render","updateHearts","updateMiniMap","updateMoney","updateKeys","updateBombCount","updateSlotA","updateSlotB","hp","fillStyle","fillRect","gridPos","money","forEach","digit","keys","bombs","itemCode","item","sprite","swordSfx","Audio","play","direction","hitBox","spriteCtx","ouch","hitbox","tracebox","topLeft","topRight","bottomLeft","bottomRight","frames","run","cooldown","invincibility","knockback","attacks","sourceX","sourceY","setDirection","damage","assign","pop","pixelPos","runCycle","frameData","grid","startFrame","row","col","action","frame","updateAction","speed","currentFrame","neighbors","possibleActions","checkAvailableActions","type","super","worldCtx","collisionCtx","overworld","collisionMap","playerPos","worldPos","map","drawWorld","drawCollisionMap","hudCtx","boardCtx","hud","player","board","startmusic","volume","music","lovemusic","unitDeath","scrolling","scrollQueue","units","openSpaces","enemyCount","input","muted","live","clearStartPage","setTimeout","loop","destroyUnits","reset","renderStartPage","requestAnimationFrame","gameLoop","clear","step","draw","clearUnits","clearAttacks","checkBorder","scroll","processInput","stepUnits","renderDeathPage","pause","currentTime","drawUnits","drawAttacks","unit","knockBackPlayer","checkCollisionsAgainstPlayer","damageUnit","damagePlayer","takeDamage","killPlayer","killUnit","faceDirection","impassableTerrain","move","newGrid","getMapPos","scanGrid","setSpawns","renderMarryPage","console","log","playerDirection","pixel1","pixel2","pixel1value","pixel2value","topPixel","bottomPixel","checkIfBarrier","getInput","menuCanvas","getElementById","getContext","spriteCanvas","mapCanvas","collisionCanvas","window","init"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function equalArr(arr1,arr2) {\n  for (let i = 0; i - arr1.length - 1; i++) {\n    if (arr1[i] !== arr2[i]) return false;\n  }\n  return true;\n}\n\nexport function sumArr(arr) {\n  let sum = 0\n  for (let i = 0; i < arr.length; i++) {\n    sum += arr[i];\n  }\n  return sum;\n}\n\nexport function getMapPixel(ctx, x, y) {\n  const pixel = ctx.getImageData(x, y, 1, 1);\n  return [pixel.data[0], pixel.data[1], pixel.data[2]];\n}\n\nexport function sumMapPixel(ctx, x, y) {\n  const pixel = ctx.getImageData(x, y, 1, 1);\n  return (pixel.data[0] + pixel.data[1] + pixel.data[2]);\n}\n\nexport function scanMapTile(ctx, x, y) {\n  const tile = ctx.getImageData(x+23, y+23, 2, 2);\n  return sumArr(tile.data)\n}\n\nexport function sample(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function random(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function checkCollision(hitbox1, hitbox2) {\n  if (\n    hitbox1.x < hitbox2.x + hitbox2.width &&\n    hitbox1.x + hitbox1.width > hitbox2.x &&\n    hitbox1.y < hitbox2.y + hitbox2.height &&\n    hitbox1.y + hitbox1.height > hitbox2.y\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function knockbackcheck(pixel1, pixel2) {\n  let pixel1value = util.sumArr(pixel1)\n  let pixel2value = util.sumArr(pixel2)\n  if (pixel1value === constants.WALL || pixel1value === constants.WATER) return true;\n  if (pixel2value === constants.WALL || pixel2value === constants.WATER) return true;\n  return false;\n}\n\nexport function removeElement(arr, el) {\n  let idx = arr.indexOf(el)\n  if (idx > -1) arr.splice(idx, 1)\n}\n\nexport function splitNum(num) {\n  let str = num.toString();\n  let arr = [];\n  for (let i = 0; i < str.length; i++) {\n    arr.push(parseInt(str[i]));\n  }\n  return arr;\n}","import * as Util from './util'\n\nclass Input {\n  constructor() {\n    this.movement = [];\n    this.attack = \n    document.addEventListener('keyup', e => this.onKeyUp(e));\n    document.addEventListener('keydown', e => this.onKeyDown(e));\n  }\n\n  getInput() {\n    if (this.attack) {\n      this.attack = false;\n      return 'attack'\n    } else {\n      return this.movement[0]\n    }\n  }\n\n  onKeyDown(event) {\n    switch(event.keyCode) {\n      case 38:\n      case 87:\n        event.preventDefault()\n        if (!this.movement.includes('up')) this.movement.unshift('up')\n        break;\n      case 39:\n      case 68:\n        event.preventDefault()\n        if (!this.movement.includes('right')) this.movement.unshift('right')\n        break;\n      case 40:\n      case 83:\n        event.preventDefault()\n        if (!this.movement.includes('down')) this.movement.unshift('down')\n        break;\n      case 37:\n      case 65:\n        event.preventDefault()\n        if (!this.movement.includes('left')) this.movement.unshift('left')\n        break;\n      case 32:\n        event.preventDefault()\n        if (!this.fired) {\n          this.attack = true; \n          this.fired = true;\n        }\n        break;\n    }\n  }\n\n  onKeyUp() {\n    switch (event.keyCode) {\n      case 38:\n      case 87:\n        Util.removeElement(this.movement, 'up')\n        break;\n      case 39:\n      case 68:\n        Util.removeElement(this.movement, 'right')\n        break;\n      case 40:\n      case 83:\n        Util.removeElement(this.movement, 'down')\n        break;\n      case 37:\n      case 65:\n        Util.removeElement(this.movement, 'left')\n        break;\n      case 32:\n        this.fired = false;\n        break;\n    }\n  }\n}\n\nexport default Input;","import * as Util from '../util/util'\n\nclass Hud {\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.pos = { x: 0, y: 0 }\n    this.image = new Image();\n    this.image.src = \"./assets/images/ui/menu.png\"\n    this.heartSprite = new Image();\n    this.heartSprite.src = \"./assets/images/items/hearts.png\"\n    this.numbers = new Image();\n    this.numbers.src = \"./assets/images/ui/numbers.png\"\n    this.primaryitems = new Image();\n    this.primaryitems.src = './assets/images/items/primaryItems.png'\n\n    this.startPage = new Image();\n    this.startPage.src = './assets/images/ui/start.png'\n\n    this.deathPage = new Image();\n    this.deathPage.src = './assets/images/ui/deathpage.png'\n\n    this.marryPage = new Image();\n    this.marryPage.src = './assets/images/ui/marry.png'\n\n    this.maxHearts = 6;\n    this.slotA = null;\n    this.slotB = null;\n\n    this.death = false;\n  }\n\n  renderMarryPage() {\n    this.ctx.drawImage(\n      this.marryPage, 0, 0\n    )\n  }\n\n  renderStartPage() {\n    this.ctx.drawImage(\n      this.startPage, 0, 0\n    )\n  }\n\n  renderDeathPage() {\n    if (this.death === false) {\n      this.ctx.drawImage(\n        this.deathPage, 0, 0\n      )\n      this.death = true;\n    }\n  }\n\n  clearStartPage() {\n    this.ctx.clearRect(0, 0, 768, 696)\n    this.render()\n  }\n\n  render() {\n    this.ctx.drawImage(\n      this.image,\n      0,\n      528,\n      768,\n      696,\n      this.pos.x,\n      this.pos.y,\n      768,\n      696\n    )\n    this.updateHearts(6)\n    this.updateMiniMap({ x: 7, y: 7})\n    this.updateMoney(0)\n    this.updateKeys(0)\n    this.updateBombCount(0)\n    this.updateSlotA(0)\n    this.updateSlotB()\n  }\n\n  updateHearts(hp) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(528, 96, 192, 48)\n    for (let i = 0; i < this.maxHearts; i++) {\n      this.ctx.drawImage(\n        this.heartSprite,\n        i < hp ? 24 : 72,\n        0,\n        24,\n        24,\n        528 + (24 * i),\n        96,\n        24,\n        24,\n      )\n    }\n  }\n\n  updateMiniMap(gridPos) {\n    // header\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(48, 24, 192, 48)\n    //  minimap\n    this.ctx.fillStyle = 'grey'\n    this.ctx.fillRect(48, 48, 192, 96)\n    // player dot\n    this.ctx.fillStyle = '#80D010'\n    this.ctx.fillRect(51 + (gridPos.x * 12),48 + (gridPos.y * 12),9,9)\n  }\n\n  updateMoney(money) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(312, 48, 48, 24)\n    let digits = Util.splitNum(money)\n    digits.forEach((digit, i) => {\n      this.ctx.drawImage(\n        this.numbers,\n        0 + (24 * digit),\n        0,\n        24,\n        24,\n        312 + (24 * i),\n        48,\n        24,\n        24\n      )\n    })\n  }\n\n  updateKeys(keys) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(312, 96, 48, 24)\n    let digits = Util.splitNum(keys)\n    digits.forEach((digit, i) => {\n      this.ctx.drawImage(\n        this.numbers,\n        0 + (24 * digit),\n        0,\n        24,\n        24,\n        312 + (24 * i),\n        96,\n        24,\n        24\n      )\n    })\n  }\n\n  updateBombCount(bombs) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(312, 120, 48, 24)\n    let digits = Util.splitNum(bombs)\n    digits.forEach((digit, i) => {\n      this.ctx.drawImage(\n        this.numbers,\n        0 + (24 * digit),\n        0,\n        24,\n        24,\n        312 + (24 * i),\n        120,\n        24,\n        24\n      )\n    })\n  }\n\n  updateSlotA(itemCode) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(456, 72, 24, 48)\n    this.ctx.drawImage(\n      this.primaryitems,\n      0 + (24 * itemCode),\n      0,\n      24,\n      48,\n      456,\n      72,\n      24,\n      48\n    )\n  }\n\n  updateSlotB(item) {\n    this.ctx.fillStyle = 'black'\n    this.ctx.fillRect(384, 72, 24, 48)\n    // this.ctx.drawImage(\n    //   this.primaryitems\n    // )\n  }\n}\n\nexport default Hud;","class Sword {\n  constructor(pos, ctx) {\n    this.ctx = ctx\n    this.sprite = new Image();\n    this.sprite.src = \"./assets/images/player/attacks.png\"\n    this.swordSfx = new Audio(\"./assets/sfx/sword.wav\");\n    this.swordSfx.play()\n\n    this.direction = pos.direction\n\n    if (this.direction === 96) { // up\n      this.pos = { x: pos.x, y: pos.y - 36 }\n      this.hitBox = { x: pos.x + 18, y: pos.y - 36, width: 9, height: 48}\n    } else if (this.direction === 144) { // right\n      this.pos = { x: pos.x + 36, y: pos.y }\n      this.hitBox = { x: pos.x + 36, y: pos.y + 24, width: 48, height: 9 }\n    } else if (this.direction === 0) { // down\n      this.pos = { x: pos.x, y: pos.y + 36 }\n      this.hitBox = { x: pos.x + 21, y: pos.y + 36, width: 9, height: 48 }\n    } else if (this.direction === 48) { // left\n      this.pos = { x: pos.x - 36, y: pos.y }\n      this.hitBox = { x: pos.x - 36, y: pos.y + 24, width: 48, height: 9 }\n    }\n  }\n\n  clear() {\n    this.ctx.clearRect(this.pos.x, this.pos.y, 48, 48);\n  }\n\n  step() {}\n\n  draw() {\n    this.ctx.drawImage(\n      this.sprite,\n      this.direction,\n      0,\n      48,\n      48,\n      this.pos.x,\n      this.pos.y,\n      48,\n      48,\n      )\n\n      // hurtbox debugger //\n      // ctx.fillStyle = 'red';\n      // ctx.fillRect(\n      //   this.hitBox.x,\n      //   this.hitBox.y,\n      //   this.hitBox.width,\n      //   this.hitBox.height)\n  }\n}\n\nexport default Sword;","import Sword from './sword.js'\n\nclass Player {\n  constructor(spriteCtx) {\n    this.ctx = spriteCtx;\n\n    this.sprite = new Image();\n    this.sprite.src = \"./assets/images/player/link.png\"\n    this.ouch = new Audio(\"./assets/sfx/link-hurt.wav\");\n\n    // setInterval(() => {\n    //   this.ouch.play()\n    // }, 1);\n    this.pos = { x: 336, y: 432, width: 48, height: 48, direction: 0, }\n\n    this.hitbox = { x: this.pos.x + 12, y: this.pos.y + 12, width: 24, height: 24 }\n\n    this.tracebox = {\n      topLeft: [this.pos.x + 9, this.pos.y + 24],\n      topRight: [this.pos.x + 39, this.pos.y + 24],\n      bottomLeft: [this.pos.x + 9, this.pos.y + 45],\n      bottomRight: [this.pos.x + 39, this.pos.y + 45],\n    }\n\n    this.frames = {\n      run: 0,\n      attack: 0,\n      cooldown: 0,\n      invincibility: 0,\n      knockback: 0,\n    }\n\n    this.hp = 6.0;\n\n    this.attacks = [];\n  }\n\n  reset() {\n    this.hp = 6.0;\n    this.attacks = [];\n    this.pos = { x: 336, y: 432, width: 48, height: 48, direction: 0, }\n    this.hitbox = { x: this.pos.x + 12, y: this.pos.y + 12, width: 24, height: 24 }\n    this.tracebox = {\n      topLeft: [this.pos.x + 9, this.pos.y + 24],\n      topRight: [this.pos.x + 39, this.pos.y + 24],\n      bottomLeft: [this.pos.x + 9, this.pos.y + 45],\n      bottomRight: [this.pos.x + 39, this.pos.y + 45],\n    }\n    this.frames = {\n      run: 0,\n      attack: 0,\n      cooldown: 0,\n      invincibility: 0,\n      knockback: 0,\n    }\n  }\n\n  clear() {\n    this.ctx.clearRect(this.pos.x, this.pos.y, 48, 48);\n  }\n\n  step() {\n    if (this.frames.run <= 0) this.frames.run = 16;\n    if (this.frames.cooldown) this.frames.cooldown--\n    if (this.frames.knockback) this.frames.knockback--\n    if (this.frames.invincibility) this.frames.invincibility--\n    this.frames.attack ? this.frames.attack-- : this.attacks.splice(0, 1)\n  }\n\n  render() {\n    if (this.hp <= 0) return;\n    if (this.frames.attack && this.frames.invincibility) {\n      this.drawImage(this.pos.direction + 240, 288 + (48 * (this.frames.invincibility % 3)));\n    } else if (this.frames.attack && !this.frames.invincibility) {\n      this.drawImage(this.pos.direction, 96);\n    } else if (!this.frames.attack && this.frames.invincibility && this.frames.run < 9) {\n      this.drawImage(this.pos.direction + 240, 0 + 48 * ((this.frames.invincibility % 3)));\n    } else if (!this.frames.attack && this.frames.invincibility && this.frames.run >= 9) {\n      this.drawImage(this.pos.direction + 240, 144);\n    } else if (!this.frames.attack && !this.frames.invincibility && this.frames.run < 9) {\n      this.drawImage(this.pos.direction, 0);\n    } else if (!this.frames.attack && !this.frames.invincibility && this.frames.run >= 9) {\n      this.drawImage(this.pos.direction, 48);\n    }\n  }\n\n  drawImage(sourceX, sourceY) {\n    this.ctx.drawImage(\n      this.sprite,\n      sourceX,\n      sourceY,\n      48,\n      48,\n      this.pos.x,\n      this.pos.y,\n      48,\n      48\n    )\n  }\n\n  setDirection(direction) {\n    switch (direction) {\n      case 'up':\n        this.pos.direction = 96\n        break;\n      case 'right':\n        this.pos.direction = 144\n        break;\n      case 'down':\n        this.pos.direction = 0\n        break;\n      case 'left':\n        this.pos.direction = 48\n        break;\n    }\n  }\n\n  move(x, y, direction) {\n    if (this.hp <= 0) return;\n    if (this.frames.cooldown) return;\n    this.frames.run--\n    this.setDirection(direction)\n    this.pos.x += x;\n    this.pos.y += y;\n    this.hitbox.x += x;\n    this.hitbox.y += y;\n    this.tracebox.topLeft[0] += x, this.tracebox.topLeft[1] += y\n    this.tracebox.topRight[0] += x, this.tracebox.topRight[1] += y\n    this.tracebox.bottomLeft[0] += x, this.tracebox.bottomLeft[1] += y\n    this.tracebox.bottomRight[0] += x, this.tracebox.bottomRight[1] += y\n  }\n\n\n  takeDamage(damage = 1) {\n    if (this.hp <= 0) return;\n    if (!this.frames.invincibility) {\n      Object.assign(this.frames, { invincibility: 45, knockback: 8 })\n      this.ouch.play()\n      this.hp -= damage\n      this.attacks.pop()\n    }\n  }\n\n  attack() {\n    if (this.hp <= 0) return;\n    if (this.frames.cooldown || this.frames.knockback) return;\n    this.frames.cooldown = 18;\n    this.frames.attack = 15;\n    this.attacks.push(new Sword(this.pos, this.ctx))\n  }\n}\n\nexport default Player;","import * as util from '../util/util'\n\nclass Spawn {\n  constructor(pixelPos, ctx) {\n    this.ctx = ctx\n    this.sprite = new Image();\n    this.sprite.src = \"./assets/images/effects.png\"\n    this.pos = {\n      x: pixelPos[0],\n      y: pixelPos[1],\n      width: 48,\n      height: 48,\n    }\n    this.pixelPos = pixelPos;\n    this.runCycle = util.random(20,150);\n\n    this.frameData = {\n      // run: 0,\n      invincibility: 100,\n    }\n  }\n\n  takeDamage() {}\n\n  clear() {\n    this.ctx.clearRect(this.pos.x, this.pos.y, 48, 48);\n  }\n\n  step() {\n    this.runCycle --\n  }\n\n  draw() {\n    this.ctx.drawImage(\n      this.sprite,\n      this.runCycle >= 8 ? 0 : 48,\n      0,\n      48,\n      48,\n      this.pos.x,\n      this.pos.y,\n      48,\n      48\n    )\n  }\n}\n\nexport default Spawn;","class Spark {\n  constructor(pos, ctx) {\n    this.ctx = ctx\n    this.sprite = new Image();\n    this.sprite.src = \"./assets/images/effects.png\"\n\n    this.pos = {\n      x: pos.x,\n      y: pos.y,\n      width: 48,\n      height: 48,\n    }\n\n    this.frameData = {\n      run: 0,\n      invincibility: 100,\n    }\n  }\n\n  takeDamage() {}\n\n  clear() {\n    this.ctx.clearRect(this.pos.x, this.pos.y, 48, 48);\n  }\n\n  step() {\n    this.frameData.run++\n  }\n\n  draw() {\n    this.ctx.drawImage(\n      this.sprite,\n      96 + (48 * Math.floor(this.frameData.run / 2)),\n      0,\n      48,\n      48,\n      this.pos.x,\n      this.pos.y,\n      48,\n      48\n    )\n  }\n}\n\nexport default Spark;","import * as util from '../util/util'\n\nclass Unit {\n  constructor(pixelPos, grid, startFrame, ctx) {\n    this.ctx = ctx;\n    this.sprite = new Image();\n    this.sprite.src = \"./assets/images/units/overworld-enemies.png\"\n    this.ouch = new Audio(\"./assets/sfx/hit-enemy.wav\");\n\n    this.grid = grid;\n\n    this.pos = {\n      x: pixelPos[0],\n      y: pixelPos[1],\n      row: ((pixelPos[1] - 168) / 48),\n      col: (pixelPos[0] / 48),\n      width: 48,\n      height: 48\n    }\n\n    this.frameData = {\n      run: 0,\n      action: 48,\n      direction: 0,\n      frame: startFrame,\n      invincibility: 0,\n    }\n\n  }\n\n  takeDamage(damage = 1) {\n    if (this.frameData.invincibility) return;\n    this.hp -= damage;\n    this.frameData.invincibility = 20;\n    this.ouch.play();\n  }\n\n  clear() {\n    this.ctx.clearRect(this.pos.x, this.pos.y, 48, 48);\n  }\n\n  step() {\n    if (this.frameData.invincibility) this.frameData.invincibility--\n    if (this.frameData.action <= 0) this.updateAction();\n\n    if (this.frameData.direction === 96) { // north\n      this.pos.y -= 1 * this.speed\n    } else if (this.frameData.direction === 144) { // east\n      this.pos.x += 1 * this.speed\n    } else if (this.frameData.direction === 0) { // south\n      this.pos.y += 1 * this.speed\n    } else if (this.frameData.direction === 48) { // west\n      this.pos.x -= 1 * this.speed\n    }\n    this.frameData.run += 1 * this.speed;\n    this.frameData.action -= 1 * this.speed;\n  }\n\n  draw() {\n    let currentFrame = this.frameData.run < 14 ? this.frameData.frame : this.frameData.frame + 48;\n    if (this.frameData.run > 25) this.frameData.run = 0;\n    // if (this.attacking) this.frameData.frame = 153;\n    this.ctx.drawImage(\n      this.sprite,\n      this.frameData.direction,\n      currentFrame,\n      48,\n      48,\n      this.pos.x,\n      this.pos.y,\n      48,\n      48\n    )\n  }\n\n  checkAvailableActions() {\n    let neighbors = [];\n    if (this.pos.row > 0 && this.grid[this.pos.row - 1][this.pos.col] === 1020) {\n      neighbors.push([96, 0, -1]); // north\n    }\n    if (this.grid[this.pos.row][this.pos.col + 1] === 1020) {\n      neighbors.push([144, 1, 0]); // east\n    }\n    if (this.pos.row < 10 && this.grid[this.pos.row + 1][this.pos.col] === 1020) {\n      neighbors.push([0, 0, 1]); // south\n    }\n    if (this.grid[this.pos.row][this.pos.col - 1] === 1020) {\n      neighbors.push([48, -1, 0]); // west\n    }\n    return neighbors;\n  }\n\n  updateAction() {\n    let possibleActions = this.checkAvailableActions();\n    this.frameData.action = 48;\n    let action = util.sample(possibleActions);\n    this.frameData.direction = action[0];\n    this.pos.col += action[1];\n    this.pos.row += action[2];\n  }\n}\n\nexport default Unit;","import * as Util from '../util/util'\nimport Unit from './unit'\nclass Octorok extends Unit {\n  constructor(pixelPos, grid, ctx) {\n    let type = Util.random(0, 4)\n    super(pixelPos, grid, (type * 96), ctx)\n    \n    // unit stats\n    this.hp = (type === 0 || type === 2) ? 1 : 2;\n    // this.ap = 1;\n\n    this.speed = Util.random(1,3)\n    //start action cycle\n    this.updateAction();\n  }\n  \n}\n\nexport default Octorok;","// Hud height is scaled up: 168\n// map screens are 768 x 528 (256 x 176)\n// world is a 16 x 8 grid\n\nclass Board {\n  constructor(worldCtx, collisionCtx) {\n    this.worldCtx = worldCtx\n    this.collisionCtx = collisionCtx\n    this.overworld = new Image();\n    this.overworld.src = './assets/images/maps/overworld.png'\n    this.collisionMap = new Image();\n    this.collisionMap.src = './assets/images/maps/overworld-collision.png'\n    \n    // this.music = new Audio(\"./assets/sfx/overworld.mp3\");\n    // this.music.autoplay();\n    // this.music.loop = true;\n    // this.music.play();\n    \n    this.pos = { x: 5376, y: 3528 }\n  }\n\n  setLocation(playerPos, worldPos, map, collisionMap) {\n\n  }\n\n  scroll(direction) {\n\n  }\n\n\n  getMapPos() {\n    return { x: this.pos.x / 768, y: (this.pos.y + 168) / 528}\n  }\n\n  render() {\n    this.drawWorld();\n    this.drawCollisionMap();\n  }\n\n  drawWorld() {\n    this.worldCtx.drawImage(\n      this.overworld,\n      this.pos.x, // x axis anchor point\n      this.pos.y, // y axis anchor point\n      768,\n      696,\n      0,\n      0,\n      768,\n      696\n    )\n  }\n\n  drawCollisionMap() {\n    this.collisionCtx.drawImage(\n      this.collisionMap,\n      this.pos.x, // x axis anchor point\n      this.pos.y, // y axis anchor point\n      768,\n      696,\n      0,\n      0,\n      768,\n      696\n    )\n  }\n}\n\nexport default Board;\n\n","import Input from './util/input'\nimport Hud from './hud/hud.js'\nimport Player from './player/player'\nimport Spawn from './units/spawn'\nimport Spark from './units/spark'\nimport Octorok from './units/octorok'\nimport Board from './board'\nimport * as constants from './util/constants'\nimport * as Util from './util/util'\n\n// gameView is 16 x 14.5 'tiles\n// gameplay is in 16 x 11 tiles\n// TODO: remove keymaster dependancy!\n\nclass Game {\n  constructor(hudCtx, spriteCtx, boardCtx, collisionCtx) {\n    this.hud = new Hud(hudCtx);\n    this.player = new Player(spriteCtx);\n    this.board = new Board(boardCtx, collisionCtx);\n    this.spriteCtx = spriteCtx;\n    this.collisionCtx = collisionCtx;\n\n    this.startmusic = new Audio(\"./assets/sfx/overworldstart.ogg\")\n    this.startmusic.volume = 0.2\n    this.music = new Audio(\"./assets/sfx/overworld.ogg\");\n    this.music.volume = 0.2;\n    this.lovemusic = new Audio(\"./assets/sfx/love.ogg\");\n    this.lovemusic.volume = 0.2;\n    // this.music.autoplay();\n    // this.music.loop = true;\n    // this.music.play();\n\n    // game sounds\n    this.unitDeath = new Audio(\"./assets/sfx/destroy-enemy.wav\");\n\n    // game scroll logic\n    this.scrolling = false;\n    this.scrollQueue = 0;\n\n    // npc placement\n    this.units = [];\n    this.grid = null; // collection of grid squares with color data of center 4 pixels.\n    this.openSpaces = null; // Array of subarrays.  Each contain a x/y pixel position pair.\n    this.enemyCount = 0;\n\n    this.input = new Input;\n\n    this.muted = false;\n    this.live = false;\n    document.addEventListener('keydown', e => {\n      if (e.keyCode === 13 && !this.live) {\n        this.live = true;\n        this.hud.clearStartPage();\n        this.startmusic.play();\n        setTimeout(() => {\n          this.music.play();\n          this.music.loop = true;\n        }, 6410);\n        // this.music.play();\n        // this.music.loop = true;\n      }\n      if (this.player.hp <= 0 && e.keyCode === 13) {\n        this.destroyUnits();\n        this.player.reset();\n        this.board.pos = { x: 5376, y: 3528 }\n        this.board.render();\n        this.hud.render()\n        this.player.render();\n        this.hud.clearStartPage();\n        this.hud.death = false;\n        this.startmusic.play();\n        setTimeout(() => {\n          this.music.play();\n          this.music.loop = true;\n        }, 6410);\n      }\n      if (e.keyCode === 77) {\n        if (this.muted) {\n          this.startmusic.volume = .2\n          this.music.volume = .2\n          this.muted = false;\n        } else {\n          this.startmusic.volume = 0\n          this.music.volume = 0\n          this.muted = true;\n        }\n      }\n    });\n  }\n  \n  init() {\n    this.board.render();\n    this.hud.render()\n    this.player.render();\n    this.hud.renderStartPage();\n    requestAnimationFrame(() => this.gameLoop())\n  }\n\n  gameLoop() {\n    // let now = Date.now();\n    // let dt = (now - lastTime) / 1000.0;\n    this.clear()\n    this.step(this.collisionCtx);\n    this.draw()\n    requestAnimationFrame(() => this.gameLoop())\n  }\n\n  clear() {\n    this.clearUnits();\n    this.clearAttacks();\n    this.player.clear();\n  }\n\n  step(collisionCtx) {\n    this.checkBorder();\n    this.scroll(collisionCtx);\n    this.processInput(collisionCtx);\n    this.stepUnits(collisionCtx);\n    this.player.step();\n  }\n\n  draw() {\n    if (this.player.hp <= 0) {\n      this.hud.renderDeathPage();\n      this.music.pause();\n      this.music.currentTime = 0;\n    }\n    this.drawUnits();\n    this.drawAttacks();\n    this.player.render();\n  }\n\n  clearUnits() {\n    this.units.forEach(unit => unit.clear())\n  }\n\n  clearAttacks() {\n    this.player.attacks.forEach(attack => attack.clear())\n  }\n\n  stepUnits(collisionCtx) {\n    if (this.player.frames.knockback) this.knockBackPlayer(collisionCtx)\n\n    this.units.forEach((unit, i) => {\n      if (unit instanceof Spawn && unit.runCycle <= 0) {\n        this.units[i] = new Octorok(unit.pixelPos, this.grid, this.spriteCtx)\n      }\n\n      unit.step();\n      this.checkCollisionsAgainstPlayer(unit);\n\n      this.player.attacks.forEach(attack => {\n        if (Util.checkCollision(attack.hitBox, unit.pos)) this.damageUnit(unit)\n      })\n\n      // if (unit instanceof Spark && unit.runCycle > 16) {\n      //   this.units.splice(this.units.indexOf(i), 1)\n      // }\n    })\n  }\n\n  checkCollisionsAgainstPlayer(unit) {\n    if (unit instanceof Spawn || unit instanceof Spark) return;\n    if (Util.checkCollision(this.player.hitbox, unit.pos)) this.damagePlayer();\n  }\n\n  damagePlayer(damage) {\n    if (this.player.hp <= 0) return;\n    this.player.takeDamage();\n    this.hud.updateHearts(this.player.hp)\n    if (this.player.hp <= 0) this.killPlayer();\n  }\n\n  killPlayer() {\n    this.unitDeath.play();\n    this.units.push(new Spark(this.player.pos, this.spriteCtx))\n    // Object.assign({x: null, y: null}, this.player.pos)\n  }\n\n  damageUnit(unit, damage) {\n    unit.takeDamage(damage);\n    if (unit.hp <= 0) this.killUnit(unit)\n  }\n\n\n  killUnit(unit) {\n    this.unitDeath.play();\n    this.units.splice(this.units.indexOf(unit), 1)\n    this.units.push(new Spark(unit.pos, this.spriteCtx))\n  }\n\n  knockBackPlayer(ctx) {\n    // if (!this.player.frames.knockback) return;\n    let faceDirection = this.player.pos.direction\n    let x = this.player.pos.x\n    let y = this.player.pos.y\n\n    if (faceDirection === 96 && y < 634 && !this.impassableTerrain('down',ctx)) {\n      this.player.move(0, 12)\n    } else if (faceDirection === 144 && x > 14 && !this.impassableTerrain('left', ctx)) {\n      this.player.move(-12, 0)\n    } else if (faceDirection === 0 && y > 188 && !this.impassableTerrain('up', ctx)) {\n      this.player.move(0, -12)\n    } else if (faceDirection === 48 && x < 706 && !this.impassableTerrain('right', ctx)) {\n      this.player.move(12, 0)\n    }\n  }\n\n  drawUnits() {\n    this.units.forEach(unit => unit.draw())\n  }\n\n  drawAttacks() {\n    this.player.attacks.forEach(attack => attack.draw())\n  }\n\n  scanGrid(ctx) {\n    let newGrid = [];\n    let openSpaces = [];\n    for (let y = 168; y < 696; y += 48) {\n      let row = [];\n      for (let x = 0; x < 768; x += 48) {\n        let value = Util.scanMapTile(ctx, x, y);\n        row.push(value);\n        if (value === 1020) openSpaces.push([x, y]);\n      }\n      newGrid.push(row);\n    }\n    this.openSpaces = openSpaces;\n    this.grid = newGrid;\n  }\n\n  setSpawns() {\n    for (let i = 0; i < this.enemyCount; i++) {\n      let pixelPos = this.openSpaces[Math.floor(Math.random() * this.openSpaces.length)];\n      this.units.push(new Spawn(pixelPos, this.spriteCtx));\n    }\n  }\n  \n  // Scrolling logic below\n  scroll(collisionCtx) {\n    if (!this.scrolling) return;\n    if (this.scrollQueue <= 0) {\n      this.hud.updateMiniMap(this.board.getMapPos())\n      this.scrolling = false;\n      this.board.drawCollisionMap(collisionCtx)\n      this.scanGrid(collisionCtx);\n      this.setSpawns();\n    } else {\n      if (this.board.pos.y === 1952 && this.board.pos.x === 2304) {\n        this.hud.renderMarryPage();\n        this.lovemusic.play();\n        setTimeout(function(){\n          this.destroyUnits();\n        },1000);\n        this.music.pause();       \n      }\n      console.log(this.board.pos.y,  this.board.pos.x);\n      let playerDirection = this.player.pos.direction\n      if (playerDirection === 96) {\n        this.board.pos.y -= 8;\n        if (this.scrollQueue > 48) this.player.move(0, 8)\n      }\n      if (playerDirection === 144) {\n        this.board.pos.x += 8;\n        if (this.scrollQueue > 48) this.player.move(-8, 0)\n      }\n      if (playerDirection === 0) {\n        this.board.pos.y += 8;\n        if (this.scrollQueue > 48) this.player.move(0, -8)\n      }\n      if (playerDirection === 48) {\n        this.board.pos.x -= 8;\n        if (this.scrollQueue > 48) this.player.move(8, 0)\n      }\n      this.scrollQueue -= 8;\n      this.board.drawWorld()\n    }\n  }\n\n  checkBorder() {\n    if (this.player.pos.y < constants.BORDERTOP || this.player.pos.y > constants.BORDERBOTTOM) {\n      this.scrolling = true;\n      this.destroyUnits()\n      this.scrollQueue = 528;\n    }\n    if (this.player.pos.x > constants.BORDERRIGHT || this.player.pos.x < constants.BORDERLEFT) {\n      this.scrolling = true;\n      this.destroyUnits()\n      this.scrollQueue = 768;\n    }\n  }\n\n  destroyUnits() {\n    this.clearUnits();\n    this.units = [];\n    this.enemyCount = (Util.random(1, 6)) // reload enemy count for next screen.\n  }\n\n  // collision layer check below\n  checkIfBarrier(pixel1, pixel2) {\n    let pixel1value = Util.sumArr(pixel1)\n    let pixel2value = Util.sumArr(pixel2)\n    if (pixel1value === constants.WALL || pixel1value === constants.WATER) return true;\n    if (pixel2value === constants.WALL || pixel2value === constants.WATER) return true;\n    return false;\n  }\n\n  impassableTerrain(direction, ctx) {\n    if (direction === 'up') {\n      const topPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.topLeft[0],\n        this.player.tracebox.topLeft[1] - 3)\n      const bottomPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.topRight[0],\n        this.player.tracebox.topRight[1] - 3)\n      return this.checkIfBarrier(topPixel, bottomPixel)\n    } else if (direction === 'right') {\n      const topPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.topRight[0] + 3,\n        this.player.tracebox.topRight[1])\n      const bottomPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.bottomRight[0] + 3,\n        this.player.tracebox.bottomRight[1])\n      return this.checkIfBarrier(topPixel, bottomPixel)\n    } else if (direction === 'down') {\n      const topPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.bottomLeft[0],\n        this.player.tracebox.bottomLeft[1] + 3)\n      const bottomPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.bottomRight[0],\n        this.player.tracebox.bottomRight[1] + 3)\n      return this.checkIfBarrier(topPixel, bottomPixel)\n    } else if (direction === 'left') {\n      const topPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.topLeft[0] - 3,\n        this.player.tracebox.topRight[1])\n      const bottomPixel = Util.getMapPixel(\n        ctx,\n        this.player.tracebox.bottomLeft[0] - 3,\n        this.player.tracebox.bottomLeft[1])\n      return this.checkIfBarrier(topPixel, bottomPixel)\n    }\n  }\n\n  processInput(ctx) {\n    if (this.scrolling) return;\n    if (!this.live) return;\n    let direction = this.input.getInput()\n    let speed = null;\n    switch (direction) {\n      case 'attack':\n        this.player.attack();\n        return;\n      case 'up':\n        speed = this.impassableTerrain(direction, ctx) ? 0 : -4\n        this.player.move(0, speed, direction)\n        break;\n      case 'right':\n        speed = this.impassableTerrain(direction, ctx) ? 0 : 4\n        this.player.move(speed, 0, direction)\n        break;\n      case 'down':\n        speed = this.impassableTerrain(direction, ctx) ? 0 : 4\n        this.player.move(0, speed, direction)\n        break;\n      case 'left':\n        speed = this.impassableTerrain(direction, ctx) ? 0 : -4\n        this.player.move(speed, 0, direction)\n        break;\n    }\n  }\n}\n\n\n\n\nexport default Game;","export const FPS = 60;\n\n\n\n// Borders that trigger screen transition\nexport const BORDERTOP = 172;\nexport const BORDERLEFT = 0;\nexport const BORDERRIGHT = 720;\nexport const BORDERBOTTOM = 648;\n\n// Terrain values\nexport const WALL = 765;\nexport const WATER = 503;\n\n// Screen scroll distance\nexport const VIEWWIDTH = 768;\nexport const VIEWHEIGHT = 528;","import Game from './src/game'\n\nconst menuCanvas = document.getElementById('menu-canvas');\nconst hudCtx = menuCanvas.getContext('2d');\nmenuCanvas.width = 768\nmenuCanvas.height = 696\n\nconst spriteCanvas = document.getElementById('sprite-canvas');\nconst spriteCtx = spriteCanvas.getContext('2d');\nspriteCanvas.width = 768\nspriteCanvas.height = 696\n\nconst mapCanvas = document.getElementById('map-canvas');\nconst boardCtx = mapCanvas.getContext('2d')\nmapCanvas.width = 768\nmapCanvas.height = 696\n\nconst collisionCanvas = document.getElementById('collision-canvas');\nconst collisionCtx = collisionCanvas.getContext('2d')\ncollisionCanvas.width = 768\ncollisionCanvas.height = 696\n\n\nconst game = new Game(hudCtx, spriteCtx, boardCtx, collisionCtx)\n\nwindow.addEventListener('load',() => {\n  game.init();\n}, false);\n"],"sourceRoot":""}